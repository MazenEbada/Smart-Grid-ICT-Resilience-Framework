<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="smartgrid.model.graphiti.m2d.toolbar">
            <command
                  commandId="smartgrid.model.graphiti.m2d.Create"
                  disabledIcon="icons/NewAllocationFile.gif"
                  helpContextId="Creates a new smart grid diagram based on the selected resource"
                  icon="icons/RepositoryDiagramFile.gif"
                  label="Creates a new smart grid diagram based on the selected resource"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="oneElementSelected">
         <with
               variable="org.eclipse.ui.selection">
            <test
                  forcePluginActivation="true"
                  property="smartgrid.model.graphiti.extension"
                  value="smartgridtopo">
            </test>
            <count
                  value="1">
            </count>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="smartgrid.model.graphiti.m2d.Create"
            name="Create new SGSDiagram from selected smartgridtopo model">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="smartgrid.graphiti.m2d.view.handler.CreateDiagramHandler"
            commandId="smartgrid.model.graphiti.m2d.Create">
         <enabledWhen>
            <reference
                  definitionId="oneElementSelected">
            </reference>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="smartgrid.graphiti.m2d.view.handler.ExtensionPropertyTester"
            id="smartgrid.model.graphiti.m2d.ExtensionPropertyTester"
            namespace="smartgrid.model.graphiti"
            properties="extension"
            type="java.lang.Object">
      </propertyTester>
   </extension>

</plugin>
